( function() {
  <% if @container and @partial_name %>
    let $container = $( "<%= @container %>" )

    $container.html("<%= j render @partial_name, sd_meta_datum: @sd_meta_datum, url: @url %>");
    $container.trigger( 'sd:form-loaded' )
  <% end %>

  let infoDiv = $( ".infoDiv" );

  <% if @errors %>
    toastr.warning('<%= @errors.join(', ') %>')
  <% else %>
    //toastr.success('Data saved!')
    $('.dirty').removeClass('dirty');
    $( '.preview-button' ).removeAttr( 'disabled' )

    infoDiv.show().animate( { opacity: 1 } );
    infoDiv.show().delay( 2000 ).animate( { opacity: 0 } );

    <% if @report_title_updated %>
      location.reload();
    <% end %>
  <% end %>
} )();
